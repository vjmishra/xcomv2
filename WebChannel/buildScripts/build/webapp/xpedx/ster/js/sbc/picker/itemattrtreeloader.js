Ext.namespace("sc.swc.attribute.picker");

sc.swc.attribute.picker.AttributeTreeLoader = function(config) {
	if(!config){
		config={"sbcTreeLoaderData":{}};
	}
	Ext.apply(config.sbcTreeLoaderData, sc.attrtreeloaderdata);

    sc.swc.attribute.picker.AttributeTreeLoader.superclass.constructor.call(this, config);
}

sc.attrtreeloaderdata={
	NodeTypes:[{
		Type:"AttributeDomain",
		Identification:{
			ElementName:"AttributeDomain"
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeDomainKey",
			PathID:"AttributeDomainID"
		},
		ImageCLS:"sbc-attributedomain-icon",
		url: attrPickerActions[1],
		ReturnConfiguration:[{
			OutputNS:"getAttributeGroupList_output",
			ElementPath:"AttributeGroupList/AttributeGroup"
		}],
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeDomainID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	},{
		Type:"AttributeGroup",
		Identification:{
			ElementName:"AttributeGroup"
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeGroupKey",
			SortByAttribute:"SequenceNo",
			PathID:"AttributeGroupID"
		},
		ImageCLS:"sbc-attributegroup-icon",
		url: attrPickerActions[2],
		ReturnConfiguration:[{
			OutputNS:"getAttributeGroupList_output",
			ElementPath:"AttributeGroupList/AttributeGroup"
		},{
			OutputNS:"getAttributeList_output",
			ElementPath:"AttributeList/Attribute"
		}],
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeGroupID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	},{
		Type:"ComputedAttribute",
		IsLeafNode:true,
		Identification:{
			ElementName:"Attribute",
			Attribute:{
				AttributeName:"AttributeID",
				ExpectedValue:{
					Value:"Price_.*",
					RegExp:true
				}
			}
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeKey",
			PathID:"AttributeID",
			SortByAttribute:"SequenceNo"
		},
		ImageCLS:"sbc-computedattribute-icon",
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	},{
		Type:"ReferenceAttribute",
		IsLeafNode:true,
		Identification:{
			ElementName:"Attribute",
			NestedElement:{
				ElementName:"AttributeReference",
				Attribute:{
					AttributeName:"ReferenceName",
					ExpectedValue:{
						Value:".+",
						RegExp:true
					}
				}
			}
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeKey",
			PathID:"AttributeID",
			SortByAttribute:"SequenceNo"
		},
		ImageCLS:"sbc-referenceattribute-icon",
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	},{
		Type:"DerivedAttribute",
		IsLeafNode:true,
		Identification:{
			ElementName:"Attribute",
			NestedElement:{
				ElementName:"DerivedFromAttribute",
				Attribute:{
					AttributeName:"AttributeKey",
					ExpectedValue:{
						Value:".+",
						RegExp:true
					}
				}
			}
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeKey",
			PathID:"AttributeID",
			SortByAttribute:"SequenceNo"
		},
		ImageCLS:"sbc-derivedattribute-icon",
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	},{
		Type:"BooleanAttribute",
		IsLeafNode:true,
		Identification:{
			ElementName:"Attribute",
			Attribute:{
				AttributeName:"DataType",
				ExpectedValue:"BOOLEAN"
			}
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeKey",
			PathID:"AttributeID",
			SortByAttribute:"SequenceNo"
		},
		ImageCLS:"sbc-booleanattribute-icon",
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	},{
		Type:"NumberAttribute",
		IsLeafNode:true,
		Identification:{
			ElementName:"Attribute",
			Attribute:{
				AttributeName:"DataType",
				ExpectedValue:[{
					Value:"INTEGER"
				},{
					Value:"DECIMAL"
				}]
			}
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeKey",
			PathID:"AttributeID",
			SortByAttribute:"SequenceNo"
		},
		ImageCLS:"sbc-numberattribute-icon",
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	},{
		Type:"TextAttribute",
		IsLeafNode:true,
		Identification:{
			ElementName:"Attribute",
			Attribute:{
				AttributeName:"DataType",
				ExpectedValue:"TEXT"
			}
		},
		BindingData:{
			Display:"ShortDescription",
			Key:"AttributeKey",
			PathID:"AttributeID",
			SortByAttribute:"SequenceNo"
		},
		ImageCLS:"sbc-textattribute-icon",
		QTipConfig:{
			bundleKey:"@Type",
			params:[
				{attribute:"AttributeID"},
				{attribute:"LongDescription",defaultBundleKey:"NotDefined"}
			]
		}
	}]
}

sc.swc.attribute.picker.AttributeTreeLoader = Ext.extend(sc.swc.attribute.picker.AttributeTreeLoader, sc.swc.attribute.picker.TreeLoader, {

	getAttributeDomainParams:function(node){
		return {"getAttributeGroupList_input":Ext.encode({"AttributeGroup":{"AttributeDomainID":node.AttributeDomainID, "ParentAttributeGroupKeyQryType":"ISNULL"}})};
	},

	getAttributeGroupParams:function(node){
		return {
			"getAttributeGroupList_input":Ext.encode({"Input":{"AttributeGroup":{"AttributeDomainID":node.AttributeDomainID, "ParentAttributeGroupKey":node.AttributeGroupKey}}}),
			"getAttributeList_input":Ext.encode({"Input":{"Attribute":{"AttributeDomainID":node.AttributeDomainID, "AttributeGroupID":node.AttributeGroupID}}})
		};
	}
});